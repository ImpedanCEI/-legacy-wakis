

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Wakis 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> Wakis
          

          
          </a>

          
            
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-installation">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#wakis-installation">Wakis installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#warpx-installation">WarpX installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#developer-installation">Developer installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#optional-dependencies">Optional dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#install-miniconda">Install Miniconda</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-usersguide">User’s guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tests">Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-physicsguide">Physics Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-wakis">wakis package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wakis.bmk">wakis.bmk module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wakis.geom">wakis.geom module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wakis.gui">wakis.gui module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wakis.proc">wakis.proc module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wakis.solver">wakis.solver module</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-wakis">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Wakis</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Wakis 0.1.0 documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="wakis">
<h1>Wakis<a class="headerlink" href="#wakis" title="Permalink to this headline">¶</a></h1>
<p>Wakis is a postprocessing package that computes the Wake Potential and Impedance from pre-computed electromagnetic fields. These magnitudes are important to quantify the losses of accelerator structures with a passing beam.</p>
<p>Wakis has been coupled with <a class="reference external" href="https://warpx.readthedocs.io/en/latest/">WarpX</a>, an open-source electromagnetic Particle-In-Cell code, in order to perform time-domain simulations in 3D. WarpX supports many features including Embedded Boundaries definition through ‘.stl’ files, Perfectly-Matched-Layers (PML). It is based on <a class="reference external" href="https://amrex-codes.github.io/amrex/docs_html/">AMReX</a> allowing mesh refinement, MPI parallel computing and GPU acceleration.</p>
<p>The source code is available in the <a class="reference external" href="https://github.com/ImpedanCEI/WAKIS">WAKIS GitHub repository</a>.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This documentation is currently under development</p>
</div>
<section id="table-of-contents">
<h2>Table of contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-installation"></span><section id="installation">
<span id="installation-page"></span><h3><a class="toc-backref" href="#id1">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>We assume that you have a recent python installation (python 3.8+). It this is not the case you can make one following the dedicated section on <a class="reference internal" href="#miniconda"><span class="std std-ref">how to get a miniconda installation</span></a>.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#installation" id="id1">Installation</a></p>
<ul>
<li><p><a class="reference internal" href="#wakis-installation" id="id2">Wakis installation</a></p></li>
<li><p><a class="reference internal" href="#warpx-installation" id="id3">WarpX installation</a></p>
<ul>
<li><p><a class="reference internal" href="#step-1-warpx-source-code" id="id4">Step 1: WarpX source code</a></p></li>
<li><p><a class="reference internal" href="#step-2-install-dependencies" id="id5">Step 2: Install dependencies</a></p></li>
<li><p><a class="reference internal" href="#step-3-compile-warpx" id="id6">Step 3: Compile WarpX</a></p></li>
<li><p><a class="reference internal" href="#step-4-python-bindings" id="id7">Step 4: Python bindings</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#developer-installation" id="id8">Developer installation</a></p></li>
<li><p><a class="reference internal" href="#optional-dependencies" id="id9">Optional dependencies</a></p></li>
<li><p><a class="reference internal" href="#install-miniconda" id="id10">Install Miniconda</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="wakis-installation">
<h4><a class="toc-backref" href="#id2">Wakis installation</a><a class="headerlink" href="#wakis-installation" title="Permalink to this headline">¶</a></h4>
<p>The Wakis package can be installed using pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install wakis
</pre></div>
</div>
</section>
<section id="warpx-installation">
<h4><a class="toc-backref" href="#id3">WarpX installation</a><a class="headerlink" href="#warpx-installation" title="Permalink to this headline">¶</a></h4>
<p>This page contains a summary of the tutorial in
<a class="reference external" href="https://warpx.readthedocs.io/en/latest/install/cmake.html#compile_">https://warpx.readthedocs.io/en/latest/install/cmake.html#compile_</a> on how
to install WarpX for developers.</p>
<section id="step-1-warpx-source-code">
<h5><a class="toc-backref" href="#id4">Step 1: WarpX source code</a><a class="headerlink" href="#step-1-warpx-source-code" title="Permalink to this headline">¶</a></h5>
<p>Before you start, you will need a copy of the WarpX source code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/ECP-WarpX/WarpX.git <span class="nv">$HOME</span>/src/warpx
<span class="nb">cd</span> <span class="nv">$HOME</span>/src/warpx
</pre></div>
</div>
</section>
<section id="step-2-install-dependencies">
<h5><a class="toc-backref" href="#id5">Step 2: Install dependencies</a><a class="headerlink" href="#step-2-install-dependencies" title="Permalink to this headline">¶</a></h5>
<p>Summary of the content in
<a class="reference external" href="https://warpx.readthedocs.io/en/latest/install/dependencies.html#install-dependencies">https://warpx.readthedocs.io/en/latest/install/dependencies.html#install-dependencies</a>
WarpX depends on the following popular third party software.</p>
<ul class="simple">
<li><p>a mature C++17 compiler, e.g., GCC 7, Clang 6, NVCC 11.0, MSVC 19.15
or newer</p></li>
<li><p>CMake 3.18.0+</p></li>
<li><p>Git 2.18+</p></li>
<li><p>AMReX: we automatically download and compile a copy of AMReX</p></li>
<li><p>PICSAR: we automatically download and compile a copy of PICSAR</p></li>
</ul>
<p>These dependencies and optional ones like CUDA or OpenMP can be
installed via <a href="#id11"><span class="problematic" id="id12">`Spack&lt;https://spack.readthedocs.io/en/latest/getting_started.html#installation&gt;`_</span></a> or <a href="#id13"><span class="problematic" id="id14">`Homebrew&lt;https://brew.sh/&gt;`_</span></a></p>
<p><strong>Spack</strong></p>
<p>If not installed already, install Spack by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone -c feature.manyFiles<span class="o">=</span><span class="nb">true</span> https://github.com/spack/spack.git
. spack/share/spack/setup-env.sh
</pre></div>
</div>
<p>To install the depenedencies then do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spack env create warpx-dev
spack env activate warpx-dev

spack add adios2        <span class="c1"># for openPMD</span>
spack add blaspp        <span class="c1"># for PSATD in RZ</span>
spack add ccache
spack add cmake
spack add fftw          <span class="c1"># for PSATD</span>
spack add hdf5          <span class="c1"># for openPMD</span>
spack add lapackpp      <span class="c1"># for PSATD in RZ</span>
spack add mpi
spack add openpmd-api   <span class="c1"># for openPMD</span>
spack add pkgconfig     <span class="c1"># for fftw</span>

spack install
</pre></div>
</div>
<p><strong>Homebrew</strong></p>
<p>The preferred method to install dependencies is spack. Howeverm Homebrew is a good alternative in case you encounter some issues with Spack’s installation.</p>
<p>If not installed already, install Homebrew by:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/bin/bash -c <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>To install the dependencies then do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew update
brew tap openpmd/openpmd
brew install adios2      <span class="c1"># for openPMD</span>
brew install ccache
brew install cmake
brew install fftw        <span class="c1"># for PSATD</span>
brew install git
brew install hdf5-mpi    <span class="c1"># for openPMD</span>
brew install libomp
brew install pkg-config  <span class="c1"># for fftw</span>
brew install open-mpi
brew install openblas    <span class="c1"># for PSATD in RZ</span>
brew install openpmd-api <span class="c1"># for openPMD</span>
</pre></div>
</div>
</section>
<section id="step-3-compile-warpx">
<h5><a class="toc-backref" href="#id6">Step 3: Compile WarpX</a><a class="headerlink" href="#step-3-compile-warpx" title="Permalink to this headline">¶</a></h5>
<p>From the base of the WarpX source directory, execute this to compile
WarpX</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -S . -B build -DWarpX_DIMS<span class="o">=</span><span class="m">3</span> -DWarpX_LIB<span class="o">=</span>ON -DWarpX_EB<span class="o">=</span>ON
cmake --build build -j <span class="m">4</span>
</pre></div>
</div>
<p>That’s all! WarpX binaries are now in build/bin/.</p>
</section>
<section id="step-4-python-bindings">
<h5><a class="toc-backref" href="#id7">Step 4: Python bindings</a><a class="headerlink" href="#step-4-python-bindings" title="Permalink to this headline">¶</a></h5>
<p>Build and install pywarpx from the root of the WarpX source tree:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PYWARPX_LIB_DIR</span><span class="o">=</span><span class="nv">$PWD</span>/build/lib python3 -m pip wheel .
python3 -m pip install pywarpx-*whl
</pre></div>
</div>
<p>To avoid mistakes, the whole path to the python/python3 executable can
be given.</p>
<p>The end! Now the python libraries of pywarpx are installed in the python
version used for the installation.</p>
</section>
</section>
<section id="developer-installation">
<h4><a class="toc-backref" href="#id8">Developer installation</a><a class="headerlink" href="#developer-installation" title="Permalink to this headline">¶</a></h4>
<p>If you need to develop Wakis, you can clone the package from GitHub and install it with pip in editable mode:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/ImpedanCEI/WAKIS
pip install -e wakis
</pre></div>
</div>
</section>
<section id="optional-dependencies">
<h4><a class="toc-backref" href="#id9">Optional dependencies</a><a class="headerlink" href="#optional-dependencies" title="Permalink to this headline">¶</a></h4>
<p>For visualizing the embedded boundaries geometry defined with the implicit function option, Wakis relies on <em>scikit-image</em> package v&gt;= 0.17. You can installing using pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install scikit-image
</pre></div>
</div>
</section>
<section id="install-miniconda">
<span id="miniconda"></span><h4><a class="toc-backref" href="#id10">Install Miniconda</a><a class="headerlink" href="#install-miniconda" title="Permalink to this headline">¶</a></h4>
<p>If you don’t have a miniconda installation, you can quickly get one ready for xsuite installation with the following steps.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh
<span class="nb">source</span> miniconda3/bin/activate
pip install numpy scipy matplotlib h5py ipython pytest
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~
curl https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh &gt; miniconda_inst.sh
bash miniconda_inst.sh
<span class="nb">source</span> miniconda3/bin/activate
conda install clang_osx-64
pip install numpy scipy matplotlib h5py ipython pytest
</pre></div>
</div>
</section>
</section>
<span id="document-usersguide"></span><section id="user-s-guide">
<h3><a class="toc-backref" href="#id1">User’s guide</a><a class="headerlink" href="#user-s-guide" title="Permalink to this headline">¶</a></h3>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#user-s-guide" id="id1">User’s guide</a></p>
<ul>
<li><p><a class="reference internal" href="#examples" id="id2">Examples</a></p></li>
<li><p><a class="reference internal" href="#tests" id="id3">Tests</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This documentation is currently under development</p>
</div>
<section id="examples">
<h4><a class="toc-backref" href="#id2">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
</section>
<section id="tests">
<h4><a class="toc-backref" href="#id3">Tests</a><a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h4>
</section>
</section>
<span id="document-physicsguide"></span><section id="physics-manual">
<h3>Physics Manual<a class="headerlink" href="#physics-manual" title="Permalink to this headline">¶</a></h3>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This documentation is currently under development</p>
</div>
<p>This page will offer a basic introduction to the Wakefield and Impedance theory.</p>
<p>While in development, please check <a class="reference external" href="http://www.mweda.com/cst/cst2013/mergedProjects/CST_PARTICLE_STUDIO/special_overview/special_beams_wakefield_solver_overview.htm">CST Wakefield Solver</a> page Wakis used as a reference.</p>
</section>
<span id="document-wakis"></span><section id="wakis-package">
<h3>wakis package<a class="headerlink" href="#wakis-package" title="Permalink to this headline">¶</a></h3>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This documentation is currently under development</p>
</div>
<section id="submodules">
<h4>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h4>
</section>
<section id="module-wakis.bmk">
<span id="wakis-bmk-module"></span><h4>wakis.bmk module<a class="headerlink" href="#module-wakis.bmk" title="Permalink to this headline">¶</a></h4>
<section id="wakis-benchmark">
<h5>| WAKIS benchmark |<a class="headerlink" href="#wakis-benchmark" title="Permalink to this headline">¶</a></h5>
<p>Submodule to benchmark Wakis output with CST Wake solver[1]</p>
<p>[1] <a class="reference external" href="https://space.mit.edu/RADIO/CST_online/mergedProjects/3D/special_overview/special_beams_wakefield_solver_overview.htm">https://space.mit.edu/RADIO/CST_online/mergedProjects/3D/special_overview/special_beams_wakefield_solver_overview.htm</a></p>
<section id="functions-todo">
<h6>Functions: [TODO]<a class="headerlink" href="#functions-todo" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>a</p></li>
<li><p>b</p></li>
<li><p>c</p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_Ez">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_Ez</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_charge_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_transverse_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_Ez" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an animated plot showing the Ez field along the z axis for every timestep</p>
<p>-flag_charge_dist=True [def]: plots the passing beam charge distribution
-flag_compare_cst=True : add the comparison with CST field in cst dict
-flag_transverse_field=False [def] : add the Ez field in adjacent transverse cells Ez1(0+dx, 0+dy, z), Ez2(0+2dx, 0+2dy, z)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_WAKIS">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_WAKIS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bmk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_charge_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Imag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_WAKIS" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot results of WAKIS wake solver in different figures with the CST comparison</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>-</em>) – </p></li>
<li><p><strong>bmk</strong> (<em>-</em>) – </p></li>
<li><p><strong>flag_compare_cst</strong> (<em>-</em>) – </p></li>
<li><p><strong>flag_normalize</strong> (<em>-</em>) – </p></li>
<li><p><strong>flag_charge_dist</strong> (<em>-</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>- fig 1-4</strong> (<em>if flag_charge_dist=False</em>)</p></li>
<li><p><em>or</em></p></li>
<li><p><strong>- fig 1-5</strong> (<em>if flag_charge_dist=True</em>)</p></li>
<li><p><em>fig1 = bmk_long_WP</em></p></li>
<li><p><em>fig2 = bmk_long_Z</em></p></li>
<li><p><em>fig3 = bmk_trans_WP</em></p></li>
<li><p><em>fig4 = bmk_trans_Z</em></p></li>
<li><p><em>fig5 = bmk_charge_dist</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_charge_dist">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_charge_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bmk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_charge_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the charge distribution λ(s) and compares it with CST wake solver results</p>
<ul class="simple">
<li><p>data = read_WAKIS(out_path)</p></li>
<li><p>bmk = read_bmk(cst_path)</p></li>
<li><p>flag_compare_cst = False [default]</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_long_WP">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_long_WP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bmk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_long_WP" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the longitudinal wake potential W||(s) and compares it with CST wake solver results</p>
<ul class="simple">
<li><p>data = read_WAKIS(out_path)</p></li>
<li><p>bmk=read_bmk(cst_path)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_long_Z">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_long_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bmk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Imag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_long_Z" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the longitudinal impedance Z||(w) and compares it with CST wake solver results</p>
<ul class="simple">
<li><p>data = read_WAKIS(out_path)</p></li>
<li><p>bmk=read_bmk(cst_path)</p></li>
<li><p>flag_normalize = False [default]</p></li>
<li><p>flag_plot_Real = False [default]</p></li>
<li><p>flag_plot_Imag = False [default]</p></li>
<li><p>flag_plot_Abs = True [default]</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_trans_WP">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_trans_WP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bmk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_trans_WP" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the transverse wake potential Wx⊥(s), Wy⊥(s) and compares it with CST wake solver results</p>
<ul class="simple">
<li><p>data = read_WAKIS(out_path)</p></li>
<li><p>bmk = read_bmk(cst_path)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.bmk_trans_Z">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">bmk_trans_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bmk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.bmk_trans_Z" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the transverse Impedance Zx⊥(w), Zy⊥(w) and compares it with CST wake solver results</p>
<ul class="simple">
<li><p>data = read_WAKIS(out_path)</p></li>
<li><p>bmk=read_bmk(cst_path)</p></li>
<li><p>flag_normalize = False [default]</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.generate_bmk">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">generate_bmk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.generate_bmk" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores CST wake solver output data in a dictionary to perform the benchmark</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cst_path</strong> (<em>-</em>) – </p></li>
<li><p><strong>supported</strong> (<em>Filenames</em>) – </p></li>
<li><p><strong>-------------------</strong> – </p></li>
<li><p><strong>distribution</strong> (<em>- Charge</em>) – </p></li>
<li><p><strong>potential</strong> (<em>- Transverse wake</em>) – </p></li>
<li><p><strong>potential</strong> – ‘WPx_quadrupolar’, ‘WPy_quadrupolar’, ‘WPx_quadrupolarX’, ‘WPy_quadrupolarX’, ‘WPx_quadrupolarY’, ‘WPy_quadrupolarY’</p></li>
<li><p><strong>impedance</strong> (<em>- Transverse</em>) – </p></li>
<li><p><strong>impedance</strong> – ‘Zx_quadrupolar’, ‘Zy_quadrupolar’, ‘Zx_quadrupolarX’, ‘Zy_quadrupolarX’, ‘Zx_quadrupolarY’, ‘Zy_quadrupolarY’</p></li>
<li><p><strong>Output</strong> – </p></li>
<li><p><strong>------</strong> – </p></li>
<li><p><strong>dictionary.</strong> (<em>- 'cst.bmk' file containing the data in a</em>) – To retrieve it use data=read_bmk(cst_path)
To access the dictionary keys use data.keys()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.read_bmk">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">read_bmk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.read_bmk" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the benchmark data from file ‘cst.bmk’</p>
<ul class="simple">
<li><p>cst_path: path to the ‘cst.bmk’ file</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.bmk.run_benchmark">
<span class="sig-prename descclassname"><span class="pre">wakis.bmk.</span></span><span class="sig-name descname"><span class="pre">run_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wakis_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.bmk.run_benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the benchmark vs CST</p>
<p>-cst.bmk file. If it does not exist in path, it is generated
-wakis.out file. If it does not exist in path, WAKIS is run</p>
</dd></dl>

</section>
</section>
</section>
<section id="module-wakis.geom">
<span id="wakis-geom-module"></span><h4>wakis.geom module<a class="headerlink" href="#module-wakis.geom" title="Permalink to this headline">¶</a></h4>
<section id="wakis-geometry-module">
<h5>| WAKIS geometry module |<a class="headerlink" href="#wakis-geometry-module" title="Permalink to this headline">¶</a></h5>
<p>Auxiliary functions for WarpX geometry modelling.</p>
<section id="functions">
<h6>Functions:<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>triang_implicit: triangulates the surface of an implicit function f(x,y,z) = 0</p></li>
<li><dl class="simple">
<dt>eval_implicit: evaluates the expression parsed to the WarpX picmi.EmbeddedBoundary class</dt><dd><p>and transforms it to a f(x,y,z) function readable by triang_implicit</p>
</dd>
</dl>
</li>
<li><p>next2power: return the closest 2**n power for a given number N</p></li>
<li><p>execfile: executes a python script keeping the current local and global variables</p></li>
</ul>
</section>
<section id="requirements">
<h6>Requirements:<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h6>
<p>pip install scikit-image, matplotlib, numpy</p>
<dl class="py function">
<dt class="sig sig-object py" id="wakis.geom.eval_implicit">
<span class="sig-prename descclassname"><span class="pre">wakis.geom.</span></span><span class="sig-name descname"><span class="pre">eval_implicit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">BC</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.geom.eval_implicit" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the expression parsed to the WarpX picmi.EmbeddedBoundary class
and transforms it to a f(x,y,z) function readable by triang_implicit.</p>
<ul class="simple">
<li><p>x, y, z: variables to be defined by the plot function</p></li>
<li><dl class="simple">
<dt>BC: custom class containing the implicit function and</dt><dd><p>parameters in a string + user defined kw arguments
returned by picmi.EmbeddedBoundary</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.geom.execfile">
<span class="sig-prename descclassname"><span class="pre">wakis.geom.</span></span><span class="sig-name descname"><span class="pre">execfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.geom.execfile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.geom.next2power">
<span class="sig-prename descclassname"><span class="pre">wakis.geom.</span></span><span class="sig-name descname"><span class="pre">next2power</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.geom.next2power" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the power of two (2**)
closest to the number n given</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.geom.triang_implicit">
<span class="sig-prename descclassname"><span class="pre">wakis.geom.</span></span><span class="sig-name descname"><span class="pre">triang_implicit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">BC</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-</span> <span class="pre">3,</span> <span class="pre">3)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.geom.triang_implicit" title="Permalink to this definition">¶</a></dt>
<dd><p>Triangulates the surface of an implicit function f(x,y,z) = 0</p>
<ul class="simple">
<li><p>fun: implicit function (plot where fn==0)</p></li>
<li><p>BC: class containing the implicit function</p></li>
<li><p>bbox: the x,y,and z limits of plotting box</p></li>
</ul>
<ul class="simple">
<li><dl class="simple">
<dt>F: matrix with shape(32,32,32) that only has values</dt><dd><p>where the implicit function is close to 0 and
otherwise in float(‘nan’)</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

</section>
</section>
</section>
<section id="module-wakis.gui">
<span id="wakis-gui-module"></span><h4>wakis.gui module<a class="headerlink" href="#module-wakis.gui" title="Permalink to this headline">¶</a></h4>
<section id="wakis-geometry-module-todo">
<h5>| WAKIS geometry module | [TODO]<a class="headerlink" href="#wakis-geometry-module-todo" title="Permalink to this headline">¶</a></h5>
<p>Functions for wakis user interface.</p>
<section id="id1">
<h6>Functions:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>a</p></li>
<li><p>b</p></li>
<li><p>c</p></li>
</ul>
</section>
<section id="id2">
<h6>Requirements:<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h6>
<p>pip install X</p>
</section>
</section>
</section>
<section id="module-wakis.proc">
<span id="wakis-proc-module"></span><h4>wakis.proc module<a class="headerlink" href="#module-wakis.proc" title="Permalink to this headline">¶</a></h4>
<section id="wakis-process-module">
<h5>| WAKIS process module |<a class="headerlink" href="#wakis-process-module" title="Permalink to this headline">¶</a></h5>
<p>Functions to pre-process Wakis input and post-process the output</p>
<section id="id3">
<h6>Functions:<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h6>
<p>Pre-processing functions:
- read_WAKIS_in
- read_Ez
- preproc_WarpX
- preproc_CST
- preproc_Ez
- preproc_rho
- preproc_lambda
- check_input</p>
<p>Post-processing functions:
- read_WAKIS_out
- animate_Ez
- contour_Ez
- plot_charge_dist
- plot_long_WP
- plot_long_Z
- plot_trans_WP
- plot_trans_Z
- plot_WAKIS
- subplot_WAKIS</p>
</section>
<section id="id4">
<h6>Requirements:<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h6>
<p>pip install matplotlib, numpy, h5py, scipy</p>
<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.animate_Ez">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">animate_Ez</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_charge_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_compare_cst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_transverse_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.animate_Ez" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an animated plot showing the Ez field along the z axis for every timestep</p>
<p>-flag_charge_dist=True [def]: plots the passing beam charge distribution
-flag_compare_cst=True : add the comparison with CST field in cst dict
-flag_transverse_field=True : add the Ez field in adjacent transverse cells Ez1(0+dx, 0+dy, z), Ez2(0+2dx, 0+2dy, z)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.check_input">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">check_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.check_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if all the needed variables for the wake solver are defined.
- Beam charge ‘q’: default 1e-9 [C]
- Beam longitudinal sigma ‘sigmaz’: default 0.02 [m]
- Unit conversion ‘unit’: default 1e-3 [m]
- Beam position in transverse plane ‘xsource’, ‘ysource’: default 0.0 [m]
- Integration path position in transverse plane ‘xtest’, ‘ytest’: default 0.0 [m]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.contour_Ez">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">contour_Ez</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">100000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100000.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.contour_Ez" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an animated contour of the Ez field in the Y-Z plane at x=0</p>
<p>-vmin=-1.0e5 [def]: minimum value of the colorbar
-vmax=+1.0e5 [def]: maximum value of the colorbar</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.plot_WAKIS">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">plot_WAKIS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_charge_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Imag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.plot_WAKIS" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot results of WAKIS wake solver in different figures</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>-</em>) – </p></li>
<li><p><strong>flag_charge_dist</strong> (<em>-</em>) – </p></li>
<li><p><strong>[</strong><strong>default</strong><strong>]</strong> (<em>- flag_plot_Abs = True</em>) – </p></li>
<li><p><strong>[</strong><strong>default</strong><strong>]</strong> – </p></li>
<li><p><strong>[</strong><strong>default</strong><strong>]</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>- fig 1-4</strong> (<em>if flag_charge_dist=False</em>)</p></li>
<li><p><em>or</em></p></li>
<li><p><strong>- fig 1-5</strong> (<em>if flag_charge_dist=True</em>)</p></li>
<li><p><em>fig1 = plot_long_WP</em></p></li>
<li><p><em>fig2 = plot_long_Z</em></p></li>
<li><p><em>fig3 = plot_trans_WP</em></p></li>
<li><p><em>fig4 = plot_trans_Z</em></p></li>
<li><p><em>fig5 = plot_charge_dist</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.plot_charge_dist">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">plot_charge_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.plot_charge_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the charge distribution λ(s)</p>
<ul class="simple">
<li><p>data = read_WAKIS_out(out_path)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.plot_long_WP">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">plot_long_WP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.plot_long_WP" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the longitudinal wake potential W||(s)</p>
<ul class="simple">
<li><p>data = read_WAKIS_out(path)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.plot_long_Z">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">plot_long_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Imag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.plot_long_Z" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the longitudinal impedance Z||(w)</p>
<ul class="simple">
<li><p>data = read_WAKIS_out(path)</p></li>
<li><p>flag_plot_Real = False [default]</p></li>
<li><p>flag_plot_Imag = False [default]</p></li>
<li><p>flag_plot_Abs = True [default]</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.plot_trans_WP">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">plot_trans_WP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.plot_trans_WP" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the transverse wake potential Wx⊥(s), Wy⊥(s)</p>
<ul class="simple">
<li><p>data = read_WAKIS_out(path)</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.plot_trans_Z">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">plot_trans_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Imag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.plot_trans_Z" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the transverse impedance Zx⊥(w), Zy⊥(w)</p>
<ul class="simple">
<li><p>data = read_WAKIS_out(path)</p></li>
<li><p>flag_plot_Real = False [default]</p></li>
<li><p>flag_plot_Imag = False [default]</p></li>
<li><p>flag_plot_Abs = True [default]</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.preproc_CST">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">preproc_CST</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.preproc_CST" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-process the CST 3D field monitor output</p>
<ul class="simple">
<li><dl class="simple">
<dt>data_path: specify the path where the Ez and charge distribution data is.</dt><dd><p>[!] The folder containing the 3d Ez data should be named ‘3d’
[!] The file containing the charge distribution data should be named ‘lambda.txt’</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a href="#id5"><span class="problematic" id="id6">**</span></a>kwargs: input the rest of the required data if not stored already in cst.out</dt><dd><ul>
<li><p>‘q’: Beam charge, default 1e-9 [C]</p></li>
<li><p>‘sigmaz’: Beam longitudinal sigma, default 0.02 [m]</p></li>
<li><p>‘unit’: Unit conversion, default 1e-3 [m]</p></li>
<li><p>‘xsource’, ‘ysource’: Beam position in transverse plane, default 0.0 [m]</p></li>
<li><p>‘xtest’, ‘ytest’: Integration path position in transverse plane, default 0.0 [m]</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<ul class="simple">
<li><p>hf_name = ‘Ez.h5’ [default] specify the name of the output hdf5 file</p></li>
<li><p>out_path = cwd [default] path to the Ez.h5 file. The default is the current working directory</p></li>
</ul>
<ul class="simple">
<li><p>wakis.in file ready to use by the solver module</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.preproc_Ez">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">preproc_Ez</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.preproc_Ez" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-process the CST 3D field monitor output</p>
<ul class="simple">
<li><dl class="simple">
<dt>cst_path: specify the path where the 3d Ez data folder is.</dt><dd><p>[!] The folder containing the 3d Ez data should be named ‘3d’</p>
</dd>
</dl>
</li>
</ul>
<ul class="simple">
<li><p>hf_name = ‘Ez.h5’ [default] specify the name of the output hdf5 file</p></li>
<li><p>out_path = cwd [default] path to the Ez.h5 file. The default is the current working directory</p></li>
</ul>
<ul class="simple">
<li><p>updated cst.out file</p></li>
<li><p>hdf5 file ‘hf_name’.h5 with the Ez(x,y,z) matrix for every timestep</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.preproc_WarpX">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">preproc_WarpX</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warpx_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.preproc_WarpX" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-process WaprX simulation output warpx.out</p>
<ul class="simple">
<li><p>warpx_path: path to the warpx output file.</p></li>
<li><p>path: path to the wakis.in file</p></li>
</ul>
<ul class="simple">
<li><p>wakis.in file ready to use by the solver module</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.preproc_lambda">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">preproc_lambda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cst_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.preproc_lambda" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain charge distribution vs z from lambda.txt file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.preproc_rho">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">preproc_rho</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.preproc_rho" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain charge distribution in [C/m] from the rho.h5 file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.read_Ez">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">read_Ez</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.read_Ez" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the Ez h5 file</p>
<ul class="simple">
<li><p>out_path = cwd [default] path to the Ez.h5 file. The default is the current working directory</p></li>
<li><p>filename = ‘Ez.h5’ [default]. Specify the name of the Ez file</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.read_WAKIS_in">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">read_WAKIS_in</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.read_WAKIS_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the input data from file ‘wakis.in’ file</p>
<ul class="simple">
<li><p>path: path to the wakis.in input file.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.read_WAKIS_out">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">read_WAKIS_out</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.read_WAKIS_out" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the output file ‘wakis.out’ generated by WAKIS</p>
<ul class="simple">
<li><p>out_path: path to the wakis output file.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.proc.subplot_WAKIS">
<span class="sig-prename descclassname"><span class="pre">wakis.proc.</span></span><span class="sig-name descname"><span class="pre">subplot_WAKIS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_charge_dist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Real</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Imag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot_Abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.proc.subplot_WAKIS" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot results of WAKIS wake solver in the same figure</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> (<em>- data =</em><em> [</em><em>default</em><em>] </em><em>read_WAKIS_out</em><em>(</em><em>path</em><em>)</em><em> Dictionary containing the wake solver</em>) – </p></li>
<li><p><strong>True</strong> (<em>- flag_plot_Abs  =</em><em> [</em><em>default</em><em>]</em>) – </p></li>
<li><p><strong>False</strong> (<em>- flag_plot_Imag =</em><em> [</em><em>default</em><em>]</em>) – </p></li>
<li><p><strong>False</strong> – </p></li>
<li><p><strong>True</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>- fig</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>figure object</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>
<section id="module-wakis.solver">
<span id="wakis-solver-module"></span><h4>wakis.solver module<a class="headerlink" href="#module-wakis.solver" title="Permalink to this headline">¶</a></h4>
<section id="id7">
<h5>| WAKIS solver module |<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h5>
<p>Functions for WAKIS solver</p>
<section id="id8">
<h6>Functions:<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li><p>run_WAKIS(): main routine</p></li>
<li><p>calc_long_WP(): obtains Wake potential WP(x,y,s) form Ez(x,y,z,t) field</p></li>
<li><p>calc_trans_WP(): obtains transverse Wake potential WPx(s), WPy(s) from WP(x,y,s)</p></li>
<li><p>calc_long_Z(): obtains Impedance Z(w) from WP(s) and charge distribution λ(s)</p></li>
<li><p>calc_trans_Z(): obtains transverse Impedance Zx(w), Zy(w) from WPx(s), WPy(s) and charge distribution λ(s)</p></li>
</ul>
</section>
<section id="id9">
<h6>Requirements:<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h6>
<p>pip install matplotlib, numpy, scipy</p>
<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.DFT">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">DFT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.DFT" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the DFT of a signal
-Xt: time domain signal with a constant dt
-dt: resolution in time domain [s]
-Nf:number of samples in frequency domain
-fmax: fmax to analyse, defined by the sigmat of the bunch: fmax=1/(3*sigmat)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.FFT">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">FFT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Xt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_zeropadding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.FFT" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the FFT of a signal
-Xt: time domain signal with a constant dt
-dt: resolution in time domain [s]
-fmax: fmax to analyse, defined by the sigmat of the bunch: fmax=1/(3*sigmat)
-r: relative length of the zero padding</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.calc_long_WP">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">calc_long_WP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/edelafue/wakis/docs/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.calc_long_WP" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtains the longitudinal Wake Potential from the electric field Ez
stored in ‘hf_name.h5’ using the direct method</p>
<p>-data: wakis.in data. Can be obtained using data=read_Wakis_in(cwd)
-path=cwd [default]. Path to the h5 file with the Ez field
-hf_name=’Ez.h5’ [default]. Name of the h5 file with the Ez field</p>
<p>-WP_3d : Longitudinal wake potential matrix WP_3d(x,y,s) [V/pC]
-s : distance from bunch head to test position [m]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.calc_long_Z">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">calc_long_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">WP</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.calc_long_Z" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain impedance Z with single-sided DFT using 1000 samples</p>
<ul class="simple">
<li><dl class="simple">
<dt>output of calc_long_WP(data):</dt><dd><p>-WP : Longitudinal wake potential matrix WP(s) [V/pC]
-s : distance from bunch head to test position [m]</p>
</dd>
</dl>
</li>
<li><p>data: wakis.in input data</p></li>
</ul>
<ul class="simple">
<li><p>Z: longitudinal impedance Z(w) [Ohm]</p></li>
<li><p>f: DFT frequencies [Hz]</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.calc_trans_WP">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">calc_trans_WP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">WP_3d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.calc_trans_WP" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtains the transverse Wake Potetential through Panofsky-Wenzel theorem from the
pre-computed longitudinal wake potential in 3d</p>
<ul class="simple">
<li><dl class="simple">
<dt>output of calc_long_WP(data):</dt><dd><p>-WP_3d : Longitudinal wake potential matrix WP_3d(x,y,s) [V/pC]
-s : distance from bunch head to test position [m]</p>
</dd>
</dl>
</li>
<li><p>data: wakis.in input data</p></li>
</ul>
<p>-WPx : Horizontal transverse wake potential WPx(s) [V/pC]
-WPy : Vertical transverse wake potential WPy(s) [V/pC]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.calc_trans_Z">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">calc_trans_Z</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">WPx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">WPy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.calc_trans_Z" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.run_WAKIS">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">run_WAKIS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hf_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Ez.h5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warpx_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cst_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_preproc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_warpx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flag_cst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.run_WAKIS" title="Permalink to this definition">¶</a></dt>
<dd><p>Main routine of WAKIS. Obtains the Wake Potential and Impedance from
pre-computed electromagnetic fields of structures with a passing beam</p>
<p>-pre-process data from EM solver and stored it in ‘wakis.in’, ‘Ez.h5’
-Reads the input data dictionary from ‘wakis.in’ file
-Reads the 3d data of the Ez field from ‘Ez.h5’ file
-Performs the direct integration of the longitudinal Wake Potential
-Obtains the transverse Wake Potential through Panofsky Wenzel theorem
-Obtains the longitudinal and transverse Impedance
-Saves the data in a pickle dictionary in ‘wakis.out’ file
-Plots the results</p>
<p>-path=cwd [default] Define the path to the ‘wakis.in’ and ‘Ez.h5’ file
-hf_name=’Ez.h5’ [default]. Name of the h5 file with the Ez field
-flag_plot=True [default]. Activate plot generation
-flag_preproc=False [default] preprocesses warpx/CST if wakis.in is not found
-flag_warpx=chooses warpx preproccessing if flag_preproc=True
-flag_cst=chooses cst preprocessing if flag_preproc=True</p>
<ul class="simple">
<li><p>‘wakis.in’ file, from preproc_CST() or preproc_WarpX()</p></li>
<li><p>‘Ez.h5’ file, from preproc_Ez()</p></li>
</ul>
<p>if pre processing:
- ‘warpx.out’ or ‘cst.out’</p>
<p>-‘wakis.out’ file with the wake solver output
-‘wakis.png’ image with the wake potential and impedance plots</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wakis.solver.test_FT">
<span class="sig-prename descclassname"><span class="pre">wakis.solver.</span></span><span class="sig-name descname"><span class="pre">test_FT</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wakis.solver.test_FT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
</section>
<section id="module-wakis">
<span id="module-contents"></span><h4>Module contents<a class="headerlink" href="#module-wakis" title="Permalink to this headline">¶</a></h4>
</section>
</section>
</div>
</section>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Read the Docs

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>